services:
  # Default stdio mode for MCP client integration
  pdfgenstudio-mcp:
    build: .
    image: mcp/pdfgenstudio:latest
    environment:
      - PDFGENSTUDIO_API_KEY=${PDFGENSTUDIO_API_KEY}
      - PDFGENSTUDIO_BASE_URL=${PDFGENSTUDIO_BASE_URL:-https://api.pdfgenstudio.com}
    stdin_open: true
    tty: true
    restart: unless-stopped

  # HTTP transport mode for local development/testing
  pdfgenstudio-mcp-http:
    build: .
    image: mcp/pdfgenstudio:latest
    environment:
      - PDFGENSTUDIO_API_KEY=${PDFGENSTUDIO_API_KEY}
      - PDFGENSTUDIO_BASE_URL=${PDFGENSTUDIO_BASE_URL:-https://api.pdfgenstudio.com}
    command: ["node", "dist/index.js", "--transport", "http", "--port", "3100"]
    ports:
      - "3100:3100"
    restart: unless-stopped
    profiles:
      - http
